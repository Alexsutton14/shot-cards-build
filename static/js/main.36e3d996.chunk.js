(this["webpackJsonpshot-cards"]=this["webpackJsonpshot-cards"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(1),s=n.n(a),i=n(8),c=n.n(i),l=(n(14),n(2)),r=n(3),u=n(6),d=n(5),h=n(4),p=(n(15),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"A/B";Object(l.a)(this,e),this.shotNumber=t,this.lens=n,this.position=o,this.description=a}),b=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(l.a)(this,e),this.description=t,this.horizLine=n},j=function(e){return e.currentState?Object(o.jsx)("button",{className:"toggle-true",onClick:e.toggleFunction,children:e.trueLabel}):Object(o.jsx)("button",{className:"toggle-false",onClick:e.toggleFunction,children:e.falseLabel})},m=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).toggleEditMode=e.toggleEditMode,o}return Object(r.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)(j,{currentState:this.props.editMode,trueLabel:"Edit Mode: On",falseLabel:"Edit Mode: Off",toggleFunction:this.toggleEditMode}),this.props.editMode?null:Object(o.jsx)(j,{currentState:this.props.autoScroll.enabled,trueLabel:"AutoScroll: On",falseLabel:"AutoScroll: Off",toggleFunction:this.props.toggleAutoScrollEnable})]})}}]),n}(s.a.Component),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).AddShot=function(){o.props.updateFunction({target:{name:"add",value:"shot"}},o.props.numberInSequence),o.ToggleOpen()},o.AddNote=function(){o.props.updateFunction({target:{name:"add",value:"note"}},o.props.numberInSequence),o.ToggleOpen()},o.ToggleOpen=function(){o.setState({open:!o.state.open})},o.state={open:!1},o.ToggleOpen=o.ToggleOpen.bind(Object(u.a)(o)),o}return Object(r.a)(n,[{key:"render",value:function(){return this.props.editMode?this.state.open?Object(o.jsxs)("div",{className:"list-row container add-buttons",children:[Object(o.jsx)("button",{className:"add-shot",onClick:this.AddShot,children:"+ Shot"}),Object(o.jsx)("button",{className:"small-button close",onClick:this.ToggleOpen,children:"X"}),Object(o.jsx)("button",{className:"add-note",onClick:this.AddNote,children:"+ Note"})]}):Object(o.jsx)("div",{className:"list-row container add-buttons",children:Object(o.jsx)("button",{className:"small-button open",onClick:this.ToggleOpen,children:"+"})}):null}}]),n}(s.a.Component),v=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e="";return this.props.autoScroll.enabled&&this.props.autoScroll.position===this.props.numberInSequence&&(e=this.props.autoScroll.tallyOn?" tally-on":" tally-next"),Object(o.jsxs)("div",{className:"list-row container shot-container"+e,children:[Object(o.jsx)("div",{className:"row-left"}),Object(o.jsxs)("div",{className:"row-main",children:[Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("span",{className:"col-narrow shot-number",children:this.props.shot.shotNumber})}),Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("span",{className:"col-narrow lens-display",children:this.props.shot.lens})}),Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("span",{className:"col-narrow position-display",children:this.props.shot.position})}),Object(o.jsx)("div",{className:"col-fill",children:Object(o.jsx)("span",{className:"col-fill shot-description",children:this.props.shot.description})})]}),Object(o.jsx)("div",{className:"row-right"})]})}}]),n}(s.a.Component),g=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).updateShotObject=function(e){e.preventDefault(),o.props.updateFunction(e,o.props.numberInSequence)},o.removeShotObject=function(){o.props.updateFunction({target:{name:"delete",value:!0}},o.props.numberInSequence)},o.updateShotObject=o.updateShotObject.bind(Object(u.a)(o)),o.removeShotObject=o.removeShotObject.bind(Object(u.a)(o)),o}return Object(r.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{className:"list-row container shot-container edit-mode",children:[Object(o.jsx)("div",{className:"row-left"}),Object(o.jsxs)("div",{className:"row-main",children:[Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("input",{className:"col-narrow editable",type:"text",autoComplete:"off",name:"shotNumber",value:this.props.shot.shotNumber,onChange:this.updateShotObject})}),Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("input",{className:"col-narrow editable",type:"text",autoComplete:"off",name:"lens",value:this.props.shot.lens,onChange:this.updateShotObject})}),Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("input",{className:"col-narrow editable",type:"text",autoComplete:"off",name:"position",value:this.props.shot.position,onChange:this.updateShotObject})}),Object(o.jsx)("div",{className:"col-fill",children:Object(o.jsx)("input",{className:"col-fill editable",type:"text",autoComplete:"off",name:"description",value:this.props.shot.description,onChange:this.updateShotObject})})]}),Object(o.jsx)("div",{className:"row-right",children:Object(o.jsx)("button",{onClick:this.removeShotObject,children:"Delete"})})]})}}]),n}(s.a.Component),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e="list-row container note-container";return this.props.note.horizLine&&(e+=" horiz-line"),Object(o.jsx)("div",{className:e,children:Object(o.jsx)("span",{className:"note-text",children:this.props.note.description})})}}]),n}(s.a.Component),f=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).updateNoteObject=function(e){e.preventDefault(),o.props.updateFunction(e,o.props.numberInSequence)},o.toggleHorizLine=function(){o.props.updateFunction({target:{name:"horizLine",value:!o.props.note.horizLine}},o.props.numberInSequence)},o.removeNoteObject=function(){o.props.updateFunction({target:{name:"delete",value:!0}},o.props.numberInSequence)},o.updateNoteObject=o.updateNoteObject.bind(Object(u.a)(o)),o.toggleHorizLine=o.toggleHorizLine.bind(Object(u.a)(o)),o}return Object(r.a)(n,[{key:"render",value:function(){var e="list-row container note-container edit-mode";return this.props.note.horizLine&&(e+=" horiz-line"),Object(o.jsxs)("div",{className:e,children:[Object(o.jsx)("div",{className:"row-left"}),Object(o.jsxs)("div",{className:"row-main",children:[Object(o.jsx)("input",{className:"note-text edit-mode",type:"text",autoComplete:"off",name:"description",value:this.props.note.description,onChange:this.updateNoteObject}),Object(o.jsx)(j,{currentState:this.props.note.horizLine,trueLabel:"Horiz. Line",falseLabel:"Horiz. Line",toggleFunction:this.toggleHorizLine})]}),Object(o.jsx)("div",{className:"row-right",children:Object(o.jsx)("button",{onClick:this.removeNoteObject,children:"Delete"})})]})}}]),n}(s.a.Component);function x(e){return e.element instanceof p?e.editMode?Object(o.jsx)(g,{numberInSequence:e.numberInSequence,shot:e.element,updateFunction:e.updateFunction}):Object(o.jsx)(v,{numberInSequence:e.numberInSequence,shot:e.element,autoScroll:e.autoScroll}):e.element instanceof b?e.editMode?Object(o.jsx)(f,{numberInSequence:e.numberInSequence,note:e.element,editMode:e.editMode,updateFunction:e.updateFunction}):Object(o.jsx)(S,{numberInSequence:e.numberInSequence,note:e.element,editMode:e.editMode}):null}var N,w,C=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t="shot-card";return this.props.editMode&&(t+=" edit-mode"),Object(o.jsxs)("div",{className:t,children:[Object(o.jsxs)("div",{className:"list-row header-row",children:[Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("span",{className:"heading col-narrow",children:"Shot"})}),Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("span",{className:"heading col-narrow",children:"Lens"})}),Object(o.jsx)("div",{className:"col-narrow",children:Object(o.jsx)("span",{className:"heading col-narrow",children:"Pos."})}),Object(o.jsx)("div",{className:"col-fill",children:Object(o.jsx)("span",{className:"heading col-fill",children:"Shot Description"})})]}),this.props.shotList.map((function(t,n){return Object(o.jsxs)("div",{children:[Object(o.jsx)(O,{editMode:e.props.editMode,numberInSequence:n,updateFunction:e.props.updateElement}),Object(o.jsx)(x,{numberInSequence:n,element:t,editMode:e.props.editMode,updateFunction:e.props.updateElement,autoScroll:e.props.autoScroll})]},n)})),Object(o.jsx)(O,{editMode:this.props.editMode,numberInSequence:this.props.shotList.length,updateFunction:this.props.updateElement}),this.props.autoScroll.enabled&&this.props.autoScroll.position>=this.props.shotList.length?Object(o.jsx)("div",{className:"list-row container shot-container tally-next"}):null]})}}]),n}(s.a.Component);function k(e){return Object(o.jsxs)("div",{className:"reposition-buttons",children:[Object(o.jsx)("button",{className:"reposition-button previous",onClick:e.previousFunction,children:"Prev"}),Object(o.jsx)("button",{className:"reposition-button next",onClick:e.nextFunction,children:"Next"})]})}var y,L,E,M,I=!1,A=!1,F={video:{facingMode:{ideal:"environment"},frameRate:50,width:{ideal:4},height:{ideal:4}},audio:!1},q=function(){A=I,I=E,w.width=2,w.height=2,y.drawImage(N,0,0,2,2);var e=y.getImageData(0,0,2,2),t=(e.data[0]+e.data[4]+e.data[8]+e.data[12])/4,n=(e.data[1]+e.data[5]+e.data[9]+e.data[13])/4,o=(e.data[2]+e.data[6]+e.data[10]+e.data[14])/4;!(E=t>=75||n>=75||o>=75)||I||A?L(!E&&I&&A?{stateChange:!0,newState:!1,values:{r:t,g:n,b:o}}:{stateChange:!1,values:{r:t,g:n,b:o}}):(L({stateChange:!0,newState:!0,values:{r:t,g:n,b:o}}),L(!0))},z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).toggleEditMode=function(){var e=!o.state.editMode;e&&o.state.autoScroll.enabled&&o.toggleAutoScrollEnable(),o.setState({editMode:e})},o.toggleAutoScrollEnable=function(){var e,t=o.state.autoScroll;t.position=o.CheckNextElementIsShot(-1,!0),t.enabled=!o.state.autoScroll.enabled,o.setState({autoScroll:t}),t.enabled?(e=o.autoScrollTallyLightChange,N=document.getElementById("webcam-video"),w=document.getElementById("webcam-canvas"),L=e,navigator.mediaDevices.getUserMedia(F).then((function(e){N.srcObject=e,N.play(),y=w.getContext("2d"),M=setInterval(q,20)})).catch((function(e){console.log("An error occurred: "+e),L({error:e})}))):function(){if(M&&clearInterval(M),null!=N.srcObject){var e=N.srcObject.getTracks();e&&e.forEach((function(e){e.stop()})),N.srcObject=null}}()},o.autoScrollTallyLightChange=function(e){e.error&&o.toggleAutoScrollEnable();var t=o.state.autoScroll;e.stateChange&&e.newState?(t.tallyOn=!0,o.setState({autoScroll:t})):e.stateChange&&!e.newState&&(t.tallyOn=!1,t.position=o.CheckNextElementIsShot(t.position,!0),o.setState({autoScroll:t}))},o.moveAutoScrollPosition=function(e){var t=o.state.autoScroll;e instanceof Number?t.position=e:!0===e?t.position=o.CheckNextElementIsShot(t.position,!0):!1===e&&(t.position=o.CheckNextElementIsShot(t.position,!1)),o.setState({autoScroll:t})},o.generateDummyShotList=function(){o.setState({shotList:[new p(1,1,"A","MCU Frank"),new p(3,void 0,void 0,"A/B"),new b("Quick lens change",!1),new p("3B","2",void 0,"CU Frank"),new b("Repo left",!0)]})},o.updateElement=function(e,t){e instanceof Event&&e.preventDefault();var n=o.state.shotList,a=n[t];switch(e.target.name){case"shotNumber":a.shotNumber=e.target.value,n[t]=a;break;case"lens":a.lens=e.target.value,n[t]=a;break;case"position":a.position=e.target.value,n[t]=a;break;case"description":a.description=e.target.value,n[t]=a;break;case"horizLine":a.horizLine=e.target.value,n[t]=a;break;case"delete":n.splice(t,1);break;case"add":"shot"===e.target.value?n.splice(t,0,new p(void 0,void 0,void 0,void 0)):"note"===e.target.value&&n.splice(t,0,new b(void 0,!1));break;default:console.log("Invalid input name given to updateElement in App. Name given: "+e.target.name)}o.setState({shotList:n})},o.state={shotList:[],editMode:!0,autoScroll:{enabled:!1,position:0,tallyOn:!1}},o.toggleEditMode=o.toggleEditMode.bind(Object(u.a)(o)),o.updateElement=o.updateElement.bind(Object(u.a)(o)),o.toggleAutoScrollEnable=o.toggleAutoScrollEnable.bind(Object(u.a)(o)),o.autoScrollTallyLightChange=o.autoScrollTallyLightChange.bind(Object(u.a)(o)),o.moveAutoScrollPosition=o.moveAutoScrollPosition.bind(Object(u.a)(o)),o}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.generateDummyShotList()}},{key:"CheckNextElementIsShot",value:function(e,t){if(e>=this.state.shotList.length&&t)return e;if(e<=0&&!t)return this.CheckNextElementIsShot(-1,!0);if(t&&this.state.shotList[e+1]instanceof p)return e+1;if(t){var n=e+1;return this.CheckNextElementIsShot(n,!0)}if(!t&&this.state.shotList[e-1]instanceof p)return e-1;if(!t){var o=e-1;return this.CheckNextElementIsShot(o,!1)}return 0}},{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(m,{editMode:this.state.editMode,toggleEditMode:this.toggleEditMode,autoScroll:this.state.autoScroll,toggleAutoScrollEnable:this.toggleAutoScrollEnable}),Object(o.jsx)(C,{editMode:this.state.editMode,updateElement:this.updateElement,shotList:this.state.shotList,autoScroll:this.state.autoScroll}),this.state.autoScroll.enabled?Object(o.jsx)(k,{previousFunction:function(){e.moveAutoScrollPosition(!1)},nextFunction:function(){e.moveAutoScrollPosition(!0)}}):null,Object(o.jsx)("video",{id:"webcam-video",style:{display:"none"}}),Object(o.jsx)("canvas",{id:"webcam-canvas",style:{display:"none"}})]})}}]),n}(a.Component);c.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(z,{})}),document.getElementById("root"))}},[[16,1,2]]]);